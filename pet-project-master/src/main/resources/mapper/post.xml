<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user">

    <!-- 게시물 추가 -->
    <insert id="insertPost" parameterType="com.project.petproject.dto.Post">
        INSERT INTO post (Post_content, posted_at, post_views, post_likes, user_id)
        VALUES (#{Post_content}, #{posted_at}, #{post_views}, #{post_likes}, #{user_id})
    </insert>

        <!-- 게시물 파일 추가 -->
    <insert id="insertPostFile" parameterType="com.project.petproject.dto.Post_file">
        INSERT INTO post_file (post_idx, file_idx, file_rename, file_size, file_ext, uploaded_at)
        VALUES (#{post_idx}, #{file_idx}, #{file_rename}, #{file_size}, #{file_ext}, #{uploaded_at})
    </insert>

    <!-- 게시물 삭제 -->
    <delete id="deletePost" parameterType="int">
        DELETE FROM post WHERE post_idx = #{post_idx}
    </delete>

    <!--작성된 게시물의 내용에서 키워드 검색 -->
    <select id="selectPostByKeyword" resultType="com.project.petproject.dto.Post" parameterType="String">
        SELECT * FROM post WHERE Post_content LIKE '%' || #{keyword} || '%'
    </select>

    <!--전체 게시물 불러오기-->
    <select id="mainPost" resultType="com.project.petproject.dto.Post">
        SELECT * FROM post
    </select>

    <!-- 게시물 검색 (ID 기준) -->
    <select id="selectPostById" resultType="com.project.petproject.dto.Post" parameterType="String">
        SELECT * FROM post WHERE user_id = #{user_id}
    </select>


</mapper>
